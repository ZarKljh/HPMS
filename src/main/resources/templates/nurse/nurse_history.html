<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" layout:decorate="~{nurse/nurse_layout}">

<div layout:fragment="content" class="container-fluid my-4">

    <!-- í—¤ë” ì„¹ì…˜ -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border shadow-sm">
                <div class="card-header bg-dark text-white">
                    <h3 class="mb-0">ê°„í˜¸ì‚¬ ì •ë³´ ìˆ˜ì • íˆìŠ¤í† ë¦¬</h3>
                </div>
            </div>
        </div>
    </div>

    <!-- ê²€ìƒ‰ ì„¹ì…˜ -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border">
                <div class="card-header bg-light">
                    <h6 class="mb-0 text-secondary">ê²€ìƒ‰ ë° í•„í„°</h6>
                </div>
                <div class="card-body">
                    <form th:action="@{/nurse/history/search}" method="get" class="row g-3">
                        <div class="col-md-8">
                            <div class="input-group">
                                <span class="input-group-text bg-white border-end-0">
                                    <span class="text-muted">ğŸ”</span>
                                </span>
                                <input type="text"
                                       name="name"
                                       th:value="${searchName}"
                                       class="form-control border-start-0"
                                       placeholder="ê°„í˜¸ì‚¬ ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰í•˜ì„¸ìš”...">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <button type="submit" class="btn btn-dark me-2">ê²€ìƒ‰</button>
                            <a th:href="@{/nurse/history}" class="btn btn-outline-secondary">ì „ì²´ ì¡°íšŒ</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- ê²°ê³¼ í†µê³„ -->
    <div class="row mb-3">
        <div class="col-12">
            <div class="alert alert-light border">
                <div class="d-flex align-items-center">
                    <span class="text-muted me-2">ğŸ“Š</span>
                    <span>
                        ì´ <strong class="text-dark" th:text="${#lists.size(historyList)}">0</strong>ê±´ì˜ ìˆ˜ì • ì´ë ¥ì´ ìˆìŠµë‹ˆë‹¤.
                        <span th:if="${searchName != null and !#strings.isEmpty(searchName)}" class="text-muted">
                            (ê²€ìƒ‰ì–´: "<span class="fw-bold text-dark" th:text="${searchName}"></span>")
                        </span>
                    </span>
                </div>
            </div>
        </div>
    </div>

    <!-- íˆìŠ¤í† ë¦¬ í…Œì´ë¸” -->
    <div class="row">
        <div class="col-12">
            <div class="card border">
                <div class="card-header bg-light">
                    <h6 class="mb-0 text-secondary">ìˆ˜ì • íˆìŠ¤í† ë¦¬ ëª©ë¡</h6>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0">
                            <thead class="table-light">
                            <tr class="text-nowrap">
                                <th class="text-center" style="width: 60px;">No</th>
                                <th style="width: 140px;">ìˆ˜ì •ì¼ì‹œ</th>
                                <th style="width: 180px;">ê°„í˜¸ì‚¬ëª…</th>
                                <th style="width: 100px;">ë¶€ì„œ</th>
                                <th style="width: 100px;">ì§ê¸‰</th>
                                <th style="width: 120px;">ìˆ˜ì •ì</th>
                                <th style="width: 140px;">ì—°ë½ì²˜</th>
                                <th class="text-center" style="width: 100px;">ìƒì„¸ë³´ê¸°</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:if="${#lists.isEmpty(historyList)}">
                                <td colspan="8" class="text-center text-muted py-5">
                                    <div class="mb-3" style="font-size: 2.5rem;">ğŸ“‹</div>
                                    <div class="mb-2">ìˆ˜ì • ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.</div>
                                    <small>ë“±ë¡ëœ íˆìŠ¤í† ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤.</small>
                                </td>
                            </tr>
                            <tr th:each="history, stat : ${historyList}" class="align-middle">
                                <td class="text-center">
                                    <span class="badge bg-secondary" th:text="${stat.count}">1</span>
                                </td>
                                <td>
                                    <div class="d-flex flex-column">
                                        <span class="fw-bold text-dark" th:text="${#temporals.format(history.createDate, 'yyyy-MM-dd')}">2024-01-01</span>
                                        <small class="text-muted" th:text="${#temporals.format(history.createDate, 'HH:mm')}">10:00</small>
                                    </div>
                                </td>
                                <td>
                                    <div class="d-flex flex-column">
                                        <span class="fw-bold text-dark" th:text="${history.firstName + ' ' + history.lastName}">í™ê¸¸ë™</span>
                                        <small th:if="${history.middleName != null and !#strings.isEmpty(history.middleName)}"
                                               class="text-muted"
                                               th:text="|ì¤‘ê°„ëª…: ${history.middleName}|"></small>
                                    </div>
                                </td>
                                <td>
                                    <span th:if="${history.dept != null and !#strings.isEmpty(history.dept)}"
                                          class="badge bg-light text-dark border"
                                          th:text="${history.dept}">ë¶€ì„œ</span>
                                    <span th:unless="${history.dept != null and !#strings.isEmpty(history.dept)}"
                                          class="text-muted">-</span>
                                </td>
                                <td>
                                    <span th:if="${history.rank != null and !#strings.isEmpty(history.rank)}"
                                          class="badge bg-secondary"
                                          th:text="${history.rank}">ì§ê¸‰</span>
                                    <span th:unless="${history.rank != null and !#strings.isEmpty(history.rank)}"
                                          class="text-muted">-</span>
                                </td>
                                <td>
                                    <div class="d-flex flex-column">
                                        <span class="small fw-bold" th:text="${history.modifier != null ? history.modifier : history.writer}">ì‘ì„±ì</span>
                                        <span th:if="${history.modifier != null}" class="badge bg-warning text-dark small">ìˆ˜ì •ë¨</span>
                                        <span th:unless="${history.modifier != null}" class="badge bg-light text-dark small">ìƒì„±</span>
                                    </div>
                                </td>
                                <td>
                                    <div class="d-flex flex-column">
                                        <span th:if="${history.tel != null and !#strings.isEmpty(history.tel)}"
                                              class="small text-dark"
                                              th:text="${history.tel}">010-1234-5678</span>
                                        <span th:unless="${history.tel != null and !#strings.isEmpty(history.tel)}"
                                              class="small text-muted">ì—°ë½ì²˜ ì—†ìŒ</span>
                                        <span th:if="${history.email != null and !#strings.isEmpty(history.email)}"
                                              class="small text-muted"
                                              th:text="${history.email}">email@example.com</span>
                                    </div>
                                </td>
                                <td class="text-center">
                                    <a th:href="@{|/nurse/history/detail/${history.id}|}"
                                       class="btn btn-outline-dark btn-sm">
                                        ìƒì„¸ë³´ê¸°
                                    </a>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div th:if="${!#lists.isEmpty(historyList)}" class="card-footer bg-light border-top">
                    <div class="d-flex justify-content-between align-items-center">
                        <small class="text-muted">
                            ìµœì‹  ìˆœìœ¼ë¡œ ì •ë ¬ë˜ì—ˆìŠµë‹ˆë‹¤.
                        </small>
                        <small class="text-muted">
                            ì´ <span th:text="${#lists.size(historyList)}">0</span>ê±´ì˜ ê²°ê³¼
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<style>
    /* í…Œì´ë¸” í˜¸ë²„ íš¨ê³¼ */
    .table-hover tbody tr:hover {
        background-color: rgba(0,0,0,0.02);
    }

    /* ì¹´ë“œ í˜¸ë²„ íš¨ê³¼ */
    .card {
        transition: box-shadow 0.2s ease;
    }

    .card:hover {
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    /* ê²€ìƒ‰ ì…ë ¥ í•„ë“œ */
    .input-group-text {
        border-color: #ced4da;
    }

    .form-control:focus {
        border-color: #495057;
        box-shadow: 0 0 0 0.2rem rgba(73, 80, 87, 0.25);
    }

    /* ë°°ì§€ ìŠ¤íƒ€ì¼ */
    .badge {
        font-size: 0.75rem;
        font-weight: 500;
    }

    /* í…Œì´ë¸” ë°˜ì‘í˜• */
    @media (max-width: 768px) {
        .table th, .table td {
            padding: 0.5rem 0.25rem;
            font-size: 0.875rem;
        }

        .btn-sm {
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
        }
    }

    /* ë¬´ì±„ìƒ‰ í…Œë§ˆ */
    .bg-light {
        background-color: #f8f9fa !important;
    }

    .bg-secondary {
        background-color: #6c757d !important;
    }

    .bg-dark {
        background-color: #343a40 !important;
    }

    .text-secondary {
        color: #6c757d !important;
    }

    .border {
        border-color: #dee2e6 !important;
    }

    /* ì•Œë¦¼ ë°•ìŠ¤ */
    .alert-light {
        background-color: #fefefe;
        border-color: #dee2e6;
        color: #495057;
    }
</style>

</html>