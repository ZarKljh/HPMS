<html layout:decorate="~{nurse/nurse_layout}">
<div layout:fragment="content" class="container my-4">

  <!-- 헤더 -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4 th:if="${nurseMain}" th:text="'간호사 ' + ${nurseMain.firstName} + ' ' + ${nurseMain.lastName} + '의 수정 히스토리'">간호사 히스토리</h4>
    <h4 th:unless="${nurseMain}">간호사 히스토리</h4>
    <div>
      <a th:href="@{/nurse/history}" class="btn btn-outline-primary btn-sm">전체 히스토리</a>
      <a th:if="${nurseMain}" th:href="@{'/nurse/info/' + ${nurseMain.id}}" class="btn btn-outline-secondary btn-sm">간호사 정보</a>
    </div>
  </div>

  <!-- 히스토리 리스트 -->
  <div th:if="${historyList != null and !historyList.empty}">
    <div th:each="history : ${historyList}" class="card mb-3 shadow-sm">
      <div class="card-header d-flex justify-content-between">
        <span th:text="'히스토리 ID: ' + ${history.id}"></span>
        <div class="d-flex gap-3">
          <span th:text="'작성자: ' + ${history.writer}"></span>
          <span th:text="'작성일: ' + ${#temporals.format(history.createDate, 'yyyy-MM-dd HH:mm:ss')}"></span>
          <span th:if="${history.modifier}" th:text="'수정자: ' + ${history.modifier}"></span>
          <span th:if="${history.modifyDate}" th:text="'수정일: ' + ${#temporals.format(history.modifyDate, 'yyyy-MM-dd HH:mm:ss')}"></span>
        </div>
      </div>
      <div class="card-body">

        <!-- 기본 정보 -->
        <div class="mb-3">
          <div class="section-title">기본 정보</div>
          <div class="row">
            <div class="col-md-3 info-label">성 (First Name)</div>
            <div class="col-md-3 info-value" th:text="${history.firstName}" th:classappend="${#strings.isEmpty(history.firstName)} ? 'empty'">-</div>
            <div class="col-md-3 info-label">이름 (Last Name)</div>
            <div class="col-md-3 info-value" th:text="${history.lastName}" th:classappend="${#strings.isEmpty(history.lastName)} ? 'empty'">-</div>
          </div>
          <div class="row mt-2">
            <div class="col-md-3 info-label">중간명</div>
            <div class="col-md-3 info-value" th:text="${history.middleName}" th:classappend="${#strings.isEmpty(history.middleName)} ? 'empty'">-</div>
            <div class="col-md-3 info-label">부서</div>
            <div class="col-md-3 info-value" th:text="${history.dept}" th:classappend="${#strings.isEmpty(history.dept)} ? 'empty'">-</div>
          </div>
          <div class="row mt-2">
            <div class="col-md-3 info-label">직급</div>
            <div class="col-md-3 info-value" th:text="${history.rank}" th:classappend="${#strings.isEmpty(history.rank)} ? 'empty'">-</div>
            <div class="col-md-3 info-label">성별</div>
            <div class="col-md-3 info-value" th:text="${history.gender}" th:classappend="${#strings.isEmpty(history.gender)} ? 'empty'">-</div>
          </div>
          <div class="row mt-2">
            <div class="col-md-3 info-label">생년월일</div>
            <div class="col-md-3 info-value" th:text="${history.dateOfBirth}" th:classappend="${#strings.isEmpty(history.dateOfBirth)} ? 'empty'">-</div>
            <div class="col-md-3 info-label">입사일</div>
            <div class="col-md-3 info-value" th:text="${history.hireDate}" th:classappend="${#strings.isEmpty(history.hireDate)} ? 'empty'">-</div>
          </div>
        </div>

        <!-- 연락처 정보 -->
        <div class="mb-3">
          <div class="section-title">연락처 정보</div>
          <div class="d-flex align-items-center mb-2">
            <div th:if="${history.picture != null}">
              <img th:src="${history.picture}" class="rounded-circle me-3" style="width: 120px; height: 120px; object-fit: cover;">
            </div>
            <div th:unless="${history.picture != null}" class="picture-placeholder me-3">사진 없음</div>
            <div>
              <div>전화번호: <span th:text="${history.tel}" th:classappend="${#strings.isEmpty(history.tel)} ? 'empty'">-</span></div>
              <div>이메일: <span th:text="${history.email}" th:classappend="${#strings.isEmpty(history.email)} ? 'empty'">-</span></div>
              <div>긴급연락처: <span th:text="${history.emergencyContact}" th:classappend="${#strings.isEmpty(history.emergencyContact)} ? 'empty'">-</span></div>
            </div>
          </div>
        </div>

        <!-- 자격/교육 정보 -->
        <div class="mb-3">
          <div class="section-title">자격/교육 정보</div>
          <div class="row">
            <div class="col-md-3 info-label">간호사 면허번호</div>
            <div class="col-md-3 info-value" th:text="${history.nurseLicenseNo}" th:classappend="${#strings.isEmpty(history.nurseLicenseNo)} ? 'empty'">-</div>
            <div class="col-md-3 info-label">학력</div>
            <div class="col-md-3 info-value" th:text="${history.educationalBackground}" th:classappend="${#strings.isEmpty(history.educationalBackground)} ? 'empty'">-</div>
          </div>
          <div class="row mt-2">
            <div class="col-md-3 info-label">졸업일</div>
            <div class="col-md-3 info-value" th:text="${history.gradDate}" th:classappend="${#strings.isEmpty(history.gradDate)} ? 'empty'">-</div>
            <div class="col-md-3 info-label">외국어</div>
            <div class="col-md-3 info-value" th:text="${history.foreignLanguage}" th:classappend="${#strings.isEmpty(history.foreignLanguage)} ? 'empty'">-</div>
          </div>
        </div>

        <!-- 개인 정보 -->
        <div>
          <div class="section-title">개인 정보</div>
          <div class="row">
            <div class="col-md-3 info-label">국적</div>
            <div class="col-md-3 info-value" th:text="${history.nationality}" th:classappend="${#strings.isEmpty(history.nationality)} ? 'empty'">-</div>
            <div class="col-md-3 info-label">장애 여부</div>
            <div class="col-md-3 info-value" th:text="${history.disabilityStatus}" th:classappend="${#strings.isEmpty(history.disabilityStatus)} ? 'empty'">-</div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- 히스토리 없음 -->
  <div th:if="${historyList == null or historyList.empty}" class="alert alert-info text-center mt-4">
    📋 수정 히스토리가 없습니다.
  </div>
</div>
</html>