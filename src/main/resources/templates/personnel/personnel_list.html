<html lang="kr" layout:decorate="~{personnel/personnel_layout}">
<div layout:fragment="content" class="container">
<h2 class="listbox">Reference Personnel List</h2>
<!--  원본  <form method="get" action="/user/list">
        <label for="size">Row counter:</label>
        <select name="size" id="size" onchange="this.form.page.value='0'; this.form.submit();">
            <option th:value="5" th:selected="${size == 5}">5</option>
            <option th:value="10" th:selected="${size == 10}">10</option>
            <option th:value="20" th:selected="${size == 20}">20</option>
        </select>
        <input type="hidden" name="page" value="${page}" />
    </form>-->
    <form method="get" action="/user/list">
        <label for="size">Row counter:</label>
        <select name="size" id="size" onchange="this.form.submit();">
            <option th:value="5" th:selected="${size == 5}">5</option>
            <option th:value="10" th:selected="${size == 10}">10</option>
            <option th:value="20" th:selected="${size == 20}">20</option>
            <input type="hidden" name="page" value="1" />
        </select>
    </form>
<!--
<form method="get" action="/user/list">
    <label for="size">Row counter:</label>
    <input name="size" type="text" value="10" onchange="this.form.submit()">
</form>
-->
<div id="personnel-list"> <!-- 여기에 서버에서 받아온 리스트 HTML이 들어갑니다 -->
    <table  class="table table-hover">
        <thead class="table-info">
        <tr class="list text-center">
            <th>ID</th>
            <th>국적</th>
            <th>성명</th>
            <th>중간이름</th>
            <th>이메일</th>
            <th>휴대전화</th>
            <th>등록자</th>
            <th>등록일시</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="personnel : ${referencePersonnels}">
            <td>
                <a th:if="${personnel.id != null}"
                   th:href="|/user/detail/${personnel.id}?size=${size != null ? size : 0}&page=${page != null ? page : 0}|"
                   th:text="${personnel.id}"></a>
            </td>
            <!--
                            <a th:if="${personnel.id != null}"
                               th:href="@{/user/detail/{id}(id=${personnel.id})}"
                               th:text="${personnel.id}"></a>

                            <a th:if="${personnel.id != null}"
                               th:href="@{/user/detail/{id}(id=${personnel.id}) + '?size=' + (${size} != null ? ${size} : 0) + '&page=' + (${page} != null ? ${page} : 0)}"
                               th:text="${personnel.id}"></a>
            -->


            <td th:text="${personnel.nationality}"></td>
            <td>
                <a th:if="${personnel.id != null}"
                   th:href="|/user/detail/${personnel.id}?size=${size != null ? size : 10}&page=${currentPage != null ? currentPage : 1}|"
                   th:text="${personnel.middleName != null && personnel.middleName != ''
             ? personnel.lastName + ' ' + personnel.middleName + ' ' + personnel.firstName
             : personnel.lastName + ' ' + personnel.firstName}"></a>
            </td>
            <td th:text="${personnel.middleName}"></td>
            <td th:text="${personnel.email}"></td>
            <td th:text="${personnel.cellPhone}"></td>
            <td th:text="${personnel.creator ?: '미지정'}"></td>
            <td th:text="${#temporals.format(personnel.createDate, 'yyyy-MM-dd HH:mm')}"></td>
        </tr>
        </tbody>
    </table>
</div><!-- end of personnel-list-->
<div class="page-navigation">
    <div>
<!--        <form id="registrationForm" method="post" action="/user/personnel_registration">
            <input name="size" type="hidden" th:value="${size}" >
            &lt;!&ndash;<input name="page" type="text" th:value="${page}" hidden="hidden">&ndash;&gt;
            <input type="hidden" name="page" th:value="${currentPage}" />
            <a href="#" class="button-link text-full" onclick="event.preventDefault();submitForm(event);">
                등록하기
            </a>
            <a href="#" class="button-link text-short" onclick="event.preventDefault();submitForm(event);">
                등록
            </a>-->
        <a th:href="@{/user/personnel_registration}+'?page='+${currentPage}+'&size='+${size}" class="button-link text-full">
            등록하기
        </a>
        <a href="@{/user/personnel_registration}+'?page='+${currentPage}+'&size='+${size}" class="button-link text-short">
            등록
        </a>
            <a href="#" class="button-link delete-button" onclick="event.preventDefault(); alert('not ready')">
                삭제하기
            </a>
<!--        </form>-->
    </div>
    <div class="pagination">
        <a th:if="${currentPage > 1}"
           th:href="@{/user/list(page=1, size=${size})}">처음</a>

        <a th:if="${currentPage > 1}"
           th:href="@{/user/list(page=${currentPage - 1}, size=${size})}">이전</a>

        <span th:each="pageNum : ${pageNumbers}">
            <a th:href="@{/user/list(page=${pageNum}, size=${size})}"
                th:text="${pageNum}"
                th:class="${pageNum == currentPage} ? 'active-page' : ''"></a>
        </span>

        <a th:if="${currentPage < totalPages}"
           th:href="@{/user/list(page=${currentPage + 1}, size=${size})}">다음</a>

        <a th:if="${currentPage < totalPages}"
           th:href="@{/user/list(page=${totalPages}, size=${size})}">끝</a>
    </div>
</div>
</div>
</html>