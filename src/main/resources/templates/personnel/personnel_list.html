<html lang="kr" layout:decorate="~{personnel/personnel_layout}">
<div layout:fragment="content" class="container">
<h2 class="listbox">Reference Personnel List</h2>

<form method="get" action="/user/list">
    <label for="size">Row counter:</label>
    <select name="size" id="size" onchange="this.form.page.value='0'; this.form.submit();">
        <option th:value="5" th:selected="${size == 5}">5</option>
        <option th:value="10" th:selected="${size == 10}">10</option>
        <option th:value="20" th:selected="${size == 20}">20</option>
    </select>
    <input type="hidden" name="page" value="${currentPage}" />
</form>
<!--
<form method="get" action="/user/list">
    <label for="size">Row counter:</label>
    <input name="size" type="text" value="10" onchange="this.form.submit()">
</form>
-->
<div id="personnel-list"> <!-- 여기에 서버에서 받아온 리스트 HTML이 들어갑니다 -->
    <table  class="table table-hover">
        <thead class="table-info">
        <tr class="list text-center">
            <th>ID</th>
            <th>국적</th>
            <th>성명</th>
            <th>중간이름</th>
            <th>이메일</th>
            <th>휴대전화</th>
            <th>등록자</th>
            <th>등록일시</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="personnel : ${referencePersonnels}">
            <td>
                <a th:if="${personnel.id != null}"
                   th:href="@{/user/detail/{id}(id=${personnel.id})}"
                   th:text="${personnel.id}"></a>
            </td>
            <td th:text="${personnel.nationality}"></td>
            <td>
                <a th:if="${personnel.id != null}"
                   th:href="@{/user/detail/{id}(id=${personnel.id})}"
                   th:text="${personnel.lastName + personnel.firstName}"></a>
            </td>
            <td th:text="${personnel.middleName}"></td>
            <td th:text="${personnel.email}"></td>
            <td th:text="${personnel.cellPhone}"></td>
            <td th:text="${personnel.creator ?: '미지정'}"></td>
            <td th:text="${#temporals.format(personnel.createDate, 'yyyy-MM-dd HH:mm')}"></td>
        </tr>
        </tbody>
    </table>
</div><!-- end of personnel-list-->
<div class="page-navigation">
    <div>
        <form id="registrationForm" method="post" action="/user/personnel_registration">
            <input name="size" type="hidden" th:value="${size}" >
            <!--<input name="page" type="text" th:value="${page}" hidden="hidden">-->
            <input type="hidden" name="page" th:value="${currentPage}" />
            <a href="#" class="button-link text-full" onclick="event.preventDefault();submitForm(event);">
                등록하기
            </a>
            <a href="#" class="button-link text-short" onclick="event.preventDefault();submitForm(event);">
                등록
            </a>
            <a href="#" class="button-link delete-button" onclick="event.preventDefault(); alert('not ready')">
                삭제하기
            </a>
        </form>
    </div>
    <div class="pagination">
        <button onclick="loadPage(0)">처음</button>
        <button onclick="loadPage(${currentPage - 1})" th:if="${currentPage > 0}">이전</button>
        <span th:each="pageNum : ${pageNumbers}">
            <button onclick="loadPage([[${pageNum}]])"
                    th:class="${pageNum == currentPage} ? 'active-page' : ''">
                [[${pageNum + 1}]]
            </button>
        </span>
        <button onclick="loadPage(${currentPage + 1})" th:if="${currentPage < totalPages - 1}">다음</button>
            <button onclick="loadPage(${totalPages - 1})" th:if="${currentPage < totalPages - 1}">끝</button>
        </div><!-- end of page-navigation -->
</div>

</html>